<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>OBEY ‚Äì Music Challenge</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <style>
    :root {
      --bg: #05040a;
      --bg-panel: #0b0814;
      --bg-card: radial-gradient(circle at 0 0, #231334, #05040a 55%);
      --accent-pink: #ff4c9a;
      --accent-violet: #7e4bff;
      --accent-gold: #f6c76b;
      --accent-red: #ff3c5f;
      --accent-soft: #32203f;
      --ink-main: #f8f4ff;
      --ink-muted: #a598c8;
      --radius-card: 26px;
      --radius-pill: 999px;
      --shadow-hard: 0 22px 55px rgba(0,0,0,0.9);
      --shadow-soft: 0 14px 35px rgba(0,0,0,0.65);
      --transition-fast: 150ms ease-out;
      --transition-med: 230ms ease-out;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
        "Segoe UI", sans-serif;
      -webkit-tap-highlight-color: transparent;
    }

    body {
      min-height: 100vh;
      background:
        radial-gradient(circle at top, #221533 0, #05040a 55%),
        radial-gradient(circle at bottom, #120a1f 0, #05040a 60%);
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--ink-main);
    }

    .app-shell {
      width: 100%;
      max-width: 960px;
      padding: 18px 10px 26px;
    }

    .frame {
      background: linear-gradient(140deg, #05040a, #120b1d 60%, #05040a);
      border-radius: 30px;
      padding: 18px 14px 18px;
      border: 1px solid rgba(255,255,255,0.06);
      box-shadow: var(--shadow-hard);
      position: relative;
      overflow: hidden;
    }

    .frame::before {
      content: "";
      position: absolute;
      inset: -35%;
      background:
        radial-gradient(circle at 0 0, rgba(255,76,154,0.28), transparent 55%),
        radial-gradient(circle at 100% 0, rgba(126,75,255,0.32), transparent 50%),
        radial-gradient(circle at 50% 100%, rgba(246,199,107,0.22), transparent 60%);
      opacity: 0.85;
      pointer-events: none;
      mix-blend-mode: screen;
    }
    .frame > * {
      position: relative;
      z-index: 1;
    }

    .header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      margin-bottom: 10px;
    }

    .title-block h1 {
      font-size: 1.6rem;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      color: var(--accent-gold);
    }

    .title-block p {
      margin-top: 3px;
      font-size: 0.8rem;
      color: var(--ink-muted);
    }

    .badge-row {
      display: flex;
      flex-direction: column;
      gap: 6px;
      align-items: flex-end;
    }

    .pill {
      padding: 6px 12px;
      border-radius: var(--radius-pill);
      border: 1px solid rgba(255,255,255,0.16);
      background: rgba(5,4,15,0.92);
      color: var(--ink-muted);
      font-size: 0.72rem;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      display: inline-flex;
      align-items: center;
      gap: 7px;
    }

    .pill-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: var(--accent-pink);
      box-shadow: 0 0 12px rgba(255,76,154,0.9);
    }

    .config-toggle {
      padding: 4px 12px;
      border-radius: var(--radius-pill);
      border: 1px solid rgba(255,255,255,0.2);
      background: rgba(10,8,22,0.95);
      color: var(--accent-gold);
      font-size: 0.72rem;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      cursor: pointer;
    }

    .config-toggle span.icon {
      font-size: 0.9rem;
    }

    .config-toggle.active {
      background: linear-gradient(135deg, rgba(255,76,154,0.25), rgba(126,75,255,0.25));
      border-color: rgba(255,255,255,0.32);
    }

    .rules {
      background: rgba(5,4,15,0.9);
      border-radius: 18px;
      padding: 10px 12px;
      border: 1px solid rgba(255,255,255,0.08);
      font-size: 0.8rem;
      color: var(--ink-muted);
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .rules strong {
      color: var(--ink-main);
      font-weight: 600;
    }

    .rules-tags {
      display: flex;
      gap: 6px;
      margin-top: 3px;
      flex-wrap: wrap;
    }

    .rules-tag {
      padding: 3px 8px;
      border-radius: var(--radius-pill);
      background: rgba(22,14,40,0.95);
      border: 1px solid rgba(255,255,255,0.12);
      font-size: 0.7rem;
      color: var(--ink-muted);
    }

    .main-layout {
      display: grid;
      grid-template-columns: minmax(0, 3fr) minmax(0, 2fr);
      gap: 14px;
      margin-top: 14px;
      align-items: flex-start;
    }

    @media (max-width: 720px) {
      .main-layout {
        grid-template-columns: minmax(0,1fr);
      }
      .header {
        flex-direction: column;
        align-items: flex-start;
      }
      .badge-row {
        align-items: flex-start;
      }
    }

    .card-shell {
      display: flex;
      justify-content: center;
    }

    .card-wrapper {
      perspective: 1400px;
      width: min(420px, 100%);
    }

    .card {
      position: relative;
      width: 100%;
      aspect-ratio: 3 / 4.2;
      border-radius: var(--radius-card);
      background: var(--bg-card);
      border: 2px solid rgba(255,255,255,0.16);
      box-shadow: var(--shadow-soft);
      padding: 16px 14px;
      overflow: hidden;
      transform-style: preserve-3d;
      transition:
        transform var(--transition-med),
        box-shadow var(--transition-med),
        border-color var(--transition-med),
        background 260ms ease-out;
    }

    .card::before {
      content: "";
      position: absolute;
      inset: -40%;
      background:
        radial-gradient(circle at 0 0, rgba(255,76,154,0.25), transparent 55%),
        radial-gradient(circle at 100% 0, rgba(126,75,255,0.25), transparent 55%),
        radial-gradient(circle at 50% 100%, rgba(246,199,107,0.18), transparent 60%);
      mix-blend-mode: screen;
      pointer-events: none;
      opacity: 0.9;
    }

    .card.glow-pink { border-color: rgba(255,76,154,0.9); box-shadow: 0 0 22px rgba(255,76,154,0.7), var(--shadow-soft); }
    .card.glow-violet { border-color: rgba(126,75,255,0.9); box-shadow: 0 0 22px rgba(126,75,255,0.7), var(--shadow-soft); }
    .card.glow-gold { border-color: rgba(246,199,107,0.95); box-shadow: 0 0 22px rgba(246,199,107,0.7), var(--shadow-soft); }
    .card.glow-red { border-color: rgba(255,60,95,0.9); box-shadow: 0 0 22px rgba(255,60,95,0.7), var(--shadow-soft); }

    .card-content {
      position: relative;
      z-index: 1;
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }

    .card-top {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 0.78rem;
      color: var(--ink-muted);
      text-transform: uppercase;
      letter-spacing: 0.18em;
    }

    .card-tag {
      padding: 4px 10px;
      border-radius: var(--radius-pill);
      border: 1px solid rgba(255,255,255,0.18);
      background: rgba(7,6,20,0.9);
      font-size: 0.68rem;
    }

    .card-title {
      margin-top: 14px;
      font-size: 1.2rem;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      text-align: center;
      font-weight: 700;
    }

    .card-divider {
      height: 1px;
      margin: 14px 0 10px;
      background: linear-gradient(
        90deg,
        rgba(255,76,154,0.6),
        rgba(126,75,255,0.8),
        rgba(246,199,107,0.75)
      );
      opacity: 0.9;
    }

    .card-section-label {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.2em;
      color: var(--ink-muted);
      margin-bottom: 4px;
    }

    .card-text {
      font-size: 0.9rem;
      line-height: 1.4;
    }

    .card-obey {
      font-size: 0.9rem;
      line-height: 1.4;
      color: var(--accent-gold);
    }

    .card-bottom {
      margin-top: 8px;
    }

    .controls {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .buttons-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .btn {
      border-radius: var(--radius-pill);
      border: none;
      padding: 11px 16px;
      font-size: 0.88rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      transition:
        transform var(--transition-fast),
        box-shadow var(--transition-fast),
        filter var(--transition-fast),
        opacity var(--transition-fast);
      white-space: nowrap;
    }

    .btn-primary {
      flex: 1 1 140px;
      color: #05040a;
      background: linear-gradient(135deg, var(--accent-pink), var(--accent-violet));
      box-shadow: 0 12px 28px rgba(0,0,0,0.9);
    }

    .btn-ghost {
      flex: 0 0 auto;
      color: var(--ink-main);
      background: rgba(5,4,15,0.95);
      border: 1px solid rgba(255,255,255,0.18);
      box-shadow: 0 10px 20px rgba(0,0,0,0.75);
    }

    .btn:disabled {
      opacity: 0.5;
      cursor: default;
      transform: none;
      box-shadow: 0 8px 16px rgba(0,0,0,0.6);
    }

    .btn:active:not(:disabled) {
      transform: translateY(1px) scale(0.98);
      box-shadow: 0 8px 18px rgba(0,0,0,0.9);
      filter: brightness(0.96);
    }

    .status-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      font-size: 0.78rem;
      color: var(--ink-muted);
    }

    .status-row strong {
      color: var(--accent-gold);
    }

    .status-pill {
      padding: 5px 11px;
      border-radius: var(--radius-pill);
      background: rgba(5,4,15,0.95);
      border: 1px solid rgba(255,255,255,0.16);
      font-size: 0.72rem;
      text-transform: uppercase;
      letter-spacing: 0.14em;
    }

    /* Config panel */

    .config-panel {
      margin-top: 10px;
      background: rgba(5,4,15,0.95);
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,0.16);
      padding: 10px 12px 12px;
      display: none;
      flex-direction: column;
      gap: 8px;
    }

    .config-panel.active {
      display: flex;
    }

    .config-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      font-size: 0.78rem;
      color: var(--ink-muted);
    }

    .config-header strong {
      color: var(--accent-gold);
    }

    .config-grid {
      display: grid;
      grid-template-columns: minmax(0,1fr);
      gap: 6px;
      margin-top: 4px;
    }

    .config-field {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .config-field label {
      font-size: 0.72rem;
      color: var(--ink-muted);
    }

    .config-field input,
    .config-field textarea,
    .config-field select {
      width: 100%;
      border-radius: 10px;
      border: 1px solid rgba(255,255,255,0.22);
      background: rgba(8,6,20,0.98);
      color: var(--ink-main);
      font-size: 0.8rem;
      padding: 6px 8px;
      resize: vertical;
      min-height: 30px;
    }

    .config-field textarea {
      min-height: 42px;
      max-height: 120px;
    }

    .config-buttons {
      display: flex;
      justify-content: flex-end;
      gap: 8px;
      margin-top: 6px;
    }

    .btn-small {
      border-radius: var(--radius-pill);
      border: 1px solid rgba(255,255,255,0.2);
      background: rgba(10,8,24,0.95);
      color: var(--ink-main);
      padding: 6px 10px;
      font-size: 0.74rem;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      cursor: pointer;
    }

    .btn-small.save {
      border-color: var(--accent-violet);
      background: linear-gradient(135deg, rgba(126,75,255,0.4), rgba(255,76,154,0.2));
    }

    .config-message {
      font-size: 0.72rem;
      color: var(--accent-gold);
      min-height: 14px;
    }

    @media (max-width: 600px) {
      .frame { padding: 16px 12px 18px; }
      .card { padding: 14px 12px; }
      .card-title { font-size: 1.06rem; letter-spacing: 0.14em; }
      .buttons-row { flex-direction: column; }
      .btn-ghost { width: 100%; }
    }

    /* Card animations */

    .card-draw {
      animation: cardDraw 0.6s ease-out;
    }
    @keyframes cardDraw {
      0% {
        transform: translateY(20px) scale(0.9) rotate3d(1,0,0,18deg);
        opacity: 0;
      }
      40% {
        transform: translateY(-6px) scale(1.03) rotate3d(1,0,0,-8deg);
        opacity: 1;
      }
      100% {
        transform: translateY(0) scale(1) rotate3d(0,0,0,0deg);
        opacity: 1;
      }
    }

    .card-shuffle {
      animation: cardShuffle 0.5s ease-in-out;
    }
    @keyframes cardShuffle {
      0% { transform: translateX(0) rotate(0deg); }
      25% { transform: translateX(-6px) rotate(-2deg); }
      50% { transform: translateX(6px) rotate(2deg); }
      75% { transform: translateX(-3px) rotate(-1deg); }
      100% { transform: translateX(0) rotate(0deg); }
    }
  </style>
</head>
<body>
  <div class="app-shell">
    <div class="frame">
      <div class="header">
        <div class="title-block">
          <h1>OBEY</h1>
          <p>Dark music challenge ‚Ä¢ 2 players ‚Ä¢ drink, guess, obey the card.</p>
        </div>
        <div class="badge-row">
          <div class="pill">
            <span class="pill-dot"></span>
            <span>Play 15 sec ‚Ä¢ guess within 15 sec</span>
          </div>
          <button class="config-toggle" id="configToggle">
            <span class="icon">‚öôÔ∏è</span>
            <span>Config</span>
          </button>
        </div>
      </div>

      <div class="rules">
        <div>
          <strong>How to play:</strong> Player A draws a card and both of you pick a song that fits the theme. Take turns playing the first <strong>15 seconds</strong> of your song.
        </div>
        <div>
          If your opponent recognises your song (artist or title) at any point during those 15 seconds, <strong>you lose the round</strong> and must obey the punishment written on the card.
        </div>
        <div class="rules-tags">
          <div class="rules-tag">No repeats until deck is empty</div>
          <div class="rules-tag">2 players ‚Ä¢ phone + speakers</div>
          <div class="rules-tag">Drink responsibly</div>
        </div>
      </div>

      <div class="main-layout">
        <div class="card-shell">
          <div class="card-wrapper">
            <div class="card glow-violet" id="card">
              <div class="card-content">
                <div>
                  <div class="card-top">
                    <span>Card <span id="cardNumber">0</span> / 100</span>
                    <span class="card-tag" id="cardVibe">Deck idle</span>
                  </div>
                  <div class="card-title" id="cardTitle">
                    Press Start Game
                  </div>
                  <div class="card-divider"></div>

                  <div>
                    <div class="card-section-label">Theme</div>
                    <div class="card-text" id="cardTheme">
                      When the game starts, each card gives you a mood to match with a song. You‚Äôre trying to play something the other person doesn‚Äôt know.
                    </div>
                  </div>

                  <div class="card-bottom">
                    <div class="card-section-label">Obey</div>
                    <div class="card-obey" id="cardPunishment">
                      Lose the round, drink, and follow whatever the card demands. Some are stupid. Some are bold. All of them are yours to upgrade in Config.
                    </div>
                  </div>
                </div>

              </div>
            </div>
          </div>
        </div>

        <div class="controls">
          <div class="buttons-row">
            <button class="btn btn-ghost" id="startBtn">Start Game</button>
            <button class="btn btn-primary" id="drawBtn" disabled>üé¥ Draw Card</button>
          </div>
          <div class="status-row">
            <span id="statusText">
              Press <strong>Start Game</strong> to shuffle all 100 cards into a fresh deck.
            </span>
            <span class="status-pill" id="remainingText">Remaining: 0</span>
          </div>

          <div class="config-panel" id="configPanel">
            <div class="config-header">
              <span id="configCardLabel">Config: roll a card first</span>
              <button class="btn-small" id="resetBtn">Reset deck</button>
            </div>
            <div class="config-grid">
              <div class="config-field">
                <label for="cfgTitle">Card title</label>
                <input id="cfgTitle" type="text" placeholder="e.g. Blindfold & Bass" />
              </div>
              <div class="config-field">
                <label for="cfgTheme">Theme (what kind of song to play)</label>
                <textarea id="cfgTheme" placeholder="Describe the mood or scenario the songs should match"></textarea>
              </div>
              <div class="config-field">
                <label for="cfgPunish">Obey (what the loser must do)</label>
                <textarea id="cfgPunish" placeholder="Describe the action or dare for the loser"></textarea>
              </div>
              <div class="config-field">
                <label for="cfgVibe">Vibe tag</label>
                <select id="cfgVibe">
                  <option value="fun">Fun</option>
                  <option value="dark">Dark</option>
                  <option value="flirty">Flirty</option>
                  <option value="chaos">Chaos</option>
                  <option value="chill">Chill</option>
                </select>
              </div>
            </div>
            <div class="config-buttons">
              <button class="btn-small save" id="saveBtn">Save card</button>
            </div>
            <div class="config-message" id="configMessage"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // ------- CARD DATA (100 cards, prefilled ‚Äì you can edit these in Config) -------

    const defaultCards = [
      // 1‚Äì10
      {
        title: "Twerk Trigger",
        theme: "Drop a song that makes hips move before the first hook even hits.",
        punishment: "Loser has to twerk for 5 seconds, no excuses.",
        vibe: "fun"
      },
      {
        title: "Menace Mode",
        theme: "Villain music you‚Äôd play before doing something beautifully petty.",
        punishment: "Loser confesses one petty thing they‚Äôre actually proud of.",
        vibe: "chaos"
      },
      {
        title: "Slow Burn Touch",
        theme: "A track that starts soft but feels more dangerous with every bar.",
        punishment: "Loser holds eye contact with winner until the next card is drawn.",
        vibe: "flirty"
      },
      {
        title: "Main Character Entrance",
        theme: "The song that plays as you walk into a party like you own it.",
        punishment: "Loser walks across the room in slow motion while winner narrates.",
        vibe: "fun"
      },
      {
        title: "Dirty Bassline",
        theme: "A low, filthy bass that feels wrong in the best way.",
        punishment: "Loser has to move in time with the bass for 5 seconds.",
        vibe: "dark"
      },
      {
        title: "Lip-Bite Energy",
        theme: "Not explicit, just tension. A song that makes necks warm.",
        punishment: "Loser leans in and holds a 10-second stare, no laughing.",
        vibe: "flirty"
      },
      {
        title: "Throwback Trouble",
        theme: "A nostalgia hit from school days that still ruins your composure.",
        punishment: "Loser sings one bar like they‚Äôre on stage.",
        vibe: "fun"
      },
      {
        title: "Chaos Button",
        theme: "A song that makes people say, ‚Äúwhy is this on your phone?‚Äù",
        punishment: "Loser loudly announces the title like it‚Äôs their favorite song.",
        vibe: "chaos"
      },
      {
        title: "Underrated Gem",
        theme: "A track you swear is slept on and deserves worship.",
        punishment: "Loser gives winner a genuine, specific compliment.",
        vibe: "chill"
      },
      {
        title: "Almost Making Out",
        theme: "A song that plays in that half-second before two people finally kiss.",
        punishment: "Winner chooses exactly where loser sits for the next 2 rounds.",
        vibe: "flirty"
      },

      // 11‚Äì20
      {
        title: "Midnight Drive",
        theme: "Headlights, empty road, someone you like in the passenger seat.",
        punishment: "Loser shares one thought they only have after midnight.",
        vibe: "chill"
      },
      {
        title: "Happy Drunk",
        theme: "A song that feels like your favorite drink just hit perfectly.",
        punishment: "Loser does a dumb happy dance in their seat.",
        vibe: "fun"
      },
      {
        title: "Meme War",
        theme: "The stupidest, most cursed, yet somehow perfect meme track.",
        punishment: "Loser reenacts 5 seconds of the song‚Äôs energy.",
        vibe: "chaos"
      },
      {
        title: "Heat Check",
        theme: "A track that raises the temperature of the room instantly.",
        punishment: "Loser answers one bold question from the winner, no dodging.",
        vibe: "dark"
      },
      {
        title: "Entrance of Chaos",
        theme: "The song that plays when the craziest friend finally shows up.",
        punishment: "Loser introduces themself like they are that friend.",
        vibe: "fun"
      },
      {
        title: "Slow Trouble",
        theme: "A slow song that sounds like a bad idea in progress.",
        punishment: "Loser has to sit closer for the next two cards.",
        vibe: "flirty"
      },
      {
        title: "Group Chat Drop",
        theme: "A track you‚Äôd drop in the group chat with \"listen now\" and nothing else.",
        punishment: "Loser admits something they hid from a group chat.",
        vibe: "fun"
      },
      {
        title: "Unskippable",
        theme: "A song you never skip, no matter the mood.",
        punishment: "Loser takes a long drink while staring at the winner.",
        vibe: "dark"
      },
      {
        title: "Hype Tunnel",
        theme: "The song that plays as you walk out to a roaring crowd.",
        punishment: "Loser must do a tiny walk-out animation to nowhere.",
        vibe: "fun"
      },
      {
        title: "Soft Chaos",
        theme: "Gentle sound, unhinged lyrics.",
        punishment: "Loser reads one lyric dramatically like spoken word.",
        vibe: "chaos"
      },

      // 21‚Äì30
      {
        title: "Toxic Bop",
        theme: "The lyrics are a red flag, but the beat owns you.",
        punishment: "Loser names one of their own red flags.",
        vibe: "dark"
      },
      {
        title: "2AM Text",
        theme: "The soundtrack to a risky late-night message.",
        punishment: "Loser shares a text they regret sending (or drinks twice).",
        vibe: "flirty"
      },
      {
        title: "Club Bathroom",
        theme: "A song you‚Äôd hear blasting from a stall at 1AM.",
        punishment: "Loser hypes themself in an imaginary mirror for 5 seconds.",
        vibe: "fun"
      },
      {
        title: "Slow Grind Classic",
        theme: "An old-school slow jam that demands bodies close.",
        punishment: "Loser slow-dances alone in place for 5 seconds.",
        vibe: "flirty"
      },
      {
        title: "Windows Down",
        theme: "A track that makes you drop the windows and ignore the neighbors.",
        punishment: "Loser has to sing along to the next intro, no matter the song.",
        vibe: "fun"
      },
      {
        title: "Movie Trailer",
        theme: "A song that could score a dramatic trailer of your life.",
        punishment: "Loser narrates a 10-second trailer of their chaos era.",
        vibe: "fun"
      },
      {
        title: "First Crush",
        theme: "A track that teleports you straight to your first crush.",
        punishment: "Loser drops one short crush story or drinks twice.",
        vibe: "chill"
      },
      {
        title: "Shower Concert",
        theme: "The song you‚Äôd absolutely scream in the shower.",
        punishment: "Loser sings one word like they‚Äôre belting for their life.",
        vibe: "fun"
      },
      {
        title: "Boss Battle",
        theme: "A song that feels like a final boss fight.",
        punishment: "Loser holds their most menacing pose for 3 seconds.",
        vibe: "dark"
      },
      {
        title: "Overconfident",
        theme: "A track that makes you hotter and cooler than reality.",
        punishment: "Loser serves a model pose and holds it.",
        vibe: "flirty"
      },

      // 31‚Äì40
      {
        title: "Kitchen Dance",
        theme: "The song that plays when you end up dancing while cooking.",
        punishment: "Loser freestyles a tiny dance on the spot.",
        vibe: "fun"
      },
      {
        title: "Ay, That‚Äôs Mine",
        theme: "A track that would make you yell ‚ÄúTHIS IS MY SONG‚Äù in public.",
        punishment: "Loser becomes the DJ hype person for the winner‚Äôs next pick.",
        vibe: "fun"
      },
      {
        title: "Slow Burn Gaze",
        theme: "A song that would play while two people pretend not to stare.",
        punishment: "Loser keeps their eyes on winner until the next sip.",
        vibe: "flirty"
      },
      {
        title: "High School Hallway",
        theme: "A track that belongs in a teen drama hallway scene.",
        punishment: "Loser recreates their best or worst hallway walk.",
        vibe: "fun"
      },
      {
        title: "Sneaky Link",
        theme: "The soundtrack to sneaking out and hoping nobody hears.",
        punishment: "Loser whispers a secret or takes two drinks.",
        vibe: "dark"
      },
      {
        title: "Gym PR",
        theme: "A song that would carry you through a personal record.",
        punishment: "Loser does 5 squats or 5 wall pushups.",
        vibe: "chaos"
      },
      {
        title: "Villain Origin",
        theme: "The background track for the moment you snap.",
        punishment: "Loser gives their best evil laugh until it gets real.",
        vibe: "dark"
      },
      {
        title: "Playlist Flex",
        theme: "One of your top five tracks right now, no overthinking.",
        punishment: "Loser agrees to try one full recommendation from winner later.",
        vibe: "chill"
      },
      {
        title: "First Night Out",
        theme: "A song that reminds you of your early party era.",
        punishment: "Loser tells a short story from a reckless night.",
        vibe: "fun"
      },
      {
        title: "Room Goes Quiet",
        theme: "A track so good the whole room would go silent.",
        punishment: "Loser stays silent for 15 seconds, no phone.",
        vibe: "dark"
      },

      // 41‚Äì50
      {
        title: "Spicy Lyrics",
        theme: "A song that‚Äôs filthier on paper than it sounds out loud.",
        punishment: "Loser reads one line dead serious without laughing.",
        vibe: "dark"
      },
      {
        title: "Soft Glow",
        theme: "Gentle but heavy. A song that softens everything around you.",
        punishment: "Loser names one song that always hits their feelings.",
        vibe: "chill"
      },
      {
        title: "Dance Circle",
        theme: "A track that belongs in the centre of a dance circle.",
        punishment: "Loser shows a 3-second move, then drinks.",
        vibe: "fun"
      },
      {
        title: "Controversial Favorite",
        theme: "A song people love to hate or hate to love.",
        punishment: "Loser defends one of their controversial opinions.",
        vibe: "chaos"
      },
      {
        title: "Lights Off",
        theme: "A track that only feels right with the lights dim.",
        punishment: "Loser closes their eyes until the next card.",
        vibe: "flirty"
      },
      {
        title: "Car Karaoke",
        theme: "The car sing-along classic.",
        punishment: "Loser mimes singing into an invisible mic for 5 seconds.",
        vibe: "fun"
      },
      {
        title: "Headphones Only",
        theme: "A song that hits way better in headphones than speakers.",
        punishment: "Loser presses the next intro right up to their ear.",
        vibe: "chill"
      },
      {
        title: "Too Many Replays",
        theme: "A track you completely burned out from overplaying.",
        punishment: "Loser admits something else they overdid.",
        vibe: "fun"
      },
      {
        title: "Sneak Diss",
        theme: "A song that sounds like a subtweet in audio form.",
        punishment: "Loser tells a quick story about a time they were petty.",
        vibe: "chaos"
      },
      {
        title: "Late Night Loop",
        theme: "A song you could keep on repeat in bed at 3AM.",
        punishment: "Loser either moves closer or drinks twice.",
        vibe: "flirty"
      },

      // 51‚Äì60
      {
        title: "Festival Stage",
        theme: "A track that would go feral on a festival main stage.",
        punishment: "Loser jumps or bounces in place like they‚Äôre in the crowd.",
        vibe: "fun"
      },
      {
        title: "Slow Confidence",
        theme: "Slow tempo, high ego. A song that makes you feel seductive.",
        punishment: "Loser says one thing they like about their own body.",
        vibe: "flirty"
      },
      {
        title: "Basement Party",
        theme: "A song you‚Äôd hear in a crowded house party with sticky floors.",
        punishment: "Loser weaves through an imaginary crowd.",
        vibe: "fun"
      },
      {
        title: "Lurking on Socials",
        theme: "The soundtrack while you stalk someone‚Äôs profile a little too deep.",
        punishment: "Loser admits how far down they‚Äôve scrolled on someone.",
        vibe: "chaos"
      },
      {
        title: "Candlelight",
        theme: "A soft song that fits a low, warm room.",
        punishment: "Loser has to speak softly until the next card.",
        vibe: "flirty"
      },
      {
        title: "Rage Button",
        theme: "A track that makes you want to throw your body around.",
        punishment: "Loser headbangs or jumps for 3 seconds.",
        vibe: "dark"
      },
      {
        title: "Guilty Pleasure",
        theme: "A song you love but rarely admit.",
        punishment: "Loser reveals one more guilty pleasure (music or otherwise).",
        vibe: "chill"
      },
      {
        title: "Walk of Fame",
        theme: "A victory-lap song for when you just won something big.",
        punishment: "Loser delivers a 5-second fake acceptance speech.",
        vibe: "fun"
      },
      {
        title: "Overthinking",
        theme: "A song that sends your brain into a spiral.",
        punishment: "Loser speaks one intrusive thought out loud, then drinks.",
        vibe: "chill"
      },
      {
        title: "Airplane Mode",
        theme: "A track for the nights when you put your phone on DND.",
        punishment: "Loser leaves their phone face-down for the next 2 rounds.",
        vibe: "dark"
      },

      // 61‚Äì70
      {
        title: "Tease Track",
        theme: "A song that flirts but never fully commits.",
        punishment: "Loser holds eye contact for 5 seconds or drinks twice.",
        vibe: "flirty"
      },
      {
        title: "Opening Credits",
        theme: "A track that could open a movie about your life.",
        punishment: "Loser describes the first scene in one sentence.",
        vibe: "chill"
      },
      {
        title: "Bad Decisions",
        theme: "The song that plays when someone says ‚Äúone more shot.‚Äù",
        punishment: "Loser takes a longer drink than usual.",
        vibe: "chaos"
      },
      {
        title: "Dance Battle",
        theme: "A track that screams 1v1 dance-off.",
        punishment: "Loser attempts one small battle move.",
        vibe: "fun"
      },
      {
        title: "Background Crush",
        theme: "A low-key song that could run behind a flirting scene.",
        punishment: "Loser tells winner one thing they find attractive in people.",
        vibe: "flirty"
      },
      {
        title: "Boss Walk",
        theme: "The track you‚Äôd use walking into a room you fully control.",
        punishment: "Loser does a short boss walk on command.",
        vibe: "fun"
      },
      {
        title: "Ignore the Call",
        theme: "A song you‚Äôd turn up instead of answering someone.",
        punishment: "Loser admits a time they ignored someone on purpose.",
        vibe: "chaos"
      },
      {
        title: "Road Trip Repeat",
        theme: "A song that belongs on a long drive loop.",
        punishment: "Loser picks whether the next card must be playful or dark.",
        vibe: "chill"
      },
      {
        title: "Hook on Repeat",
        theme: "A track with a hook you never get tired of.",
        punishment: "Loser repeats one word from the hook 5 times.",
        vibe: "fun"
      },
      {
        title: "Secret Song",
        theme: "A track you rarely show anyone but love.",
        punishment: "Loser explains why it stays secret, or drinks twice.",
        vibe: "chill"
      },

      // 71‚Äì80
      {
        title: "Club Lights",
        theme: "A track that only feels right with strobes and smoke.",
        punishment: "Loser pretends to DJ for 5 seconds.",
        vibe: "fun"
      },
      {
        title: "Playlist Red Flag",
        theme: "A song that would scare you if it was someone‚Äôs top track.",
        punishment: "Loser admits one of their own red flags in dating.",
        vibe: "dark"
      },
      {
        title: "Getting Ready",
        theme: "The song that plays while you get dressed to go out.",
        punishment: "Loser does a quick pretend ‚Äúlast mirror check‚Äù.",
        vibe: "fun"
      },
      {
        title: "Afterparty Glow",
        theme: "A track for the quiet, late part after most people leave.",
        punishment: "Loser chooses whether to keep playing or pause for a break.",
        vibe: "chill"
      },
      {
        title: "Soft Threat",
        theme: "Calm voice, dangerous energy.",
        punishment: "Loser gives winner one playful warning they don‚Äôt mean.",
        vibe: "flirty"
      },
      {
        title: "Dance in Public",
        theme: "A song you‚Äôd dance to in public if it hit at the right moment.",
        punishment: "Loser must stand or change posture for the next card.",
        vibe: "fun"
      },
      {
        title: "Walk Home Alone",
        theme: "Headphones in, city humming, just you and the track.",
        punishment: "Loser shares a thought they only have when they‚Äôre alone.",
        vibe: "chill"
      },
      {
        title: "Bad Bitch Energy",
        theme: "A song that makes you feel untouchable.",
        punishment: "Loser says one thing they‚Äôre genuinely proud of.",
        vibe: "flirty"
      },
      {
        title: "Too Many Lyrics",
        theme: "A song you know embarrassingly well.",
        punishment: "Loser speaks any 5 consecutive words from the song.",
        vibe: "fun"
      },
      {
        title: "Bedroom DJ",
        theme: "A track you‚Äôd risk putting on in a private room.",
        punishment: "Loser chooses who picks the actual next IRL song.",
        vibe: "dark"
      },

      // 81‚Äì90
      {
        title: "Walk of Shame",
        theme: "A track that fits the morning after a chaotic night.",
        punishment: "Loser tells a one-line story or drinks twice.",
        vibe: "chaos"
      },
      {
        title: "Secret Move",
        theme: "A song that activates a dance move you don‚Äôt show many people.",
        punishment: "Loser hints at the move without fully doing it.",
        vibe: "fun"
      },
      {
        title: "Scrolling at Night",
        theme: "Playlist for doom-scrolling in bed.",
        punishment: "Loser admits the latest they‚Äôve stayed up on their phone.",
        vibe: "chill"
      },
      {
        title: "Overdramatic",
        theme: "Everything suddenly feels cinematic with this track.",
        punishment: "Loser tells a dramatic story in one sentence.",
        vibe: "fun"
      },
      {
        title: "Flirt Playlist",
        theme: "A song you‚Äôd sneak into a playlist for someone you like.",
        punishment: "Loser gives winner a tiny flirtatious compliment.",
        vibe: "flirty"
      },
      {
        title: "Rooftop Night",
        theme: "A track that belongs on a rooftop with the city below.",
        punishment: "Loser picks whether the vibe goes softer or rougher next.",
        vibe: "chill"
      },
      {
        title: "Chaos Romance",
        theme: "A song that sounds like a messy situationship.",
        punishment: "Loser drops one messy story headline from their past.",
        vibe: "dark"
      },
      {
        title: "Low-Key Flex",
        theme: "A song that quietly shows off your taste.",
        punishment: "Loser names something they‚Äôre low-key amazing at.",
        vibe: "chill"
      },
      {
        title: "Spilled Drink",
        theme: "The song you hear when a drink hits the floor.",
        punishment: "Loser acts out a dramatic spill reaction.",
        vibe: "fun"
      },
      {
        title: "Stay Over",
        theme: "A track that might accidentally convince someone not to leave.",
        punishment: "Loser either moves closer or takes two drinks.",
        vibe: "flirty"
      },

      // 91‚Äì100
      {
        title: "Last Call",
        theme: "The track that plays right before the night truly ends.",
        punishment: "Loser decides if you reshuffle for one last run or stop.",
        vibe: "dark"
      },
      {
        title: "Elevator Scene",
        theme: "A song that fits a tense elevator moment with someone.",
        punishment: "Loser stays silent until the next card is drawn.",
        vibe: "chill"
      },
      {
        title: "Unhinged Energy",
        theme: "A song with way more energy than is reasonable.",
        punishment: "Loser pulls their silliest face for 3 seconds.",
        vibe: "chaos"
      },
      {
        title: "Slow Walk Away",
        theme: "The soundtrack to turning your back and leaving.",
        punishment: "Loser does a dramatic walk away and return.",
        vibe: "fun"
      },
      {
        title: "Pinned Wall",
        theme: "A song intense enough to match that wall-pin moment.",
        punishment: "Loser places their back or hand on the wall for 3 seconds.",
        vibe: "flirty"
      },
      {
        title: "Secret Level",
        theme: "A track that feels like unlocking a hidden room.",
        punishment: "Loser reveals a hidden talent or weird skill.",
        vibe: "chill"
      },
      {
        title: "Phone Off",
        theme: "A song for going unreachable for a while.",
        punishment: "Loser keeps their phone out of reach for 2 rounds.",
        vibe: "dark"
      },
      {
        title: "Backseat Anthem",
        theme: "A track that belongs in the backseat of a car.",
        punishment: "Loser lets winner choose the very next real song.",
        vibe: "flirty"
      },
      {
        title: "Credits Roll",
        theme: "A song that would play over tonight‚Äôs end credits.",
        punishment: "Loser summarizes the night so far in one line.",
        vibe: "fun"
      },
      {
        title: "Wildcard",
        theme: "Any song. No theme. Pure instinct.",
        punishment: "Winner invents a new punishment on the spot.",
        vibe: "chaos"
      }
    ];

    const TOTAL_CARDS = defaultCards.length;
    const STORAGE_KEY = "obeyCards_v1";

    let cards = [];
    let deck = [];
    let currentIndex = -1;
    let gameStarted = false;

    // ---- audio (no files, just WebAudio tones) ----
    let audioCtx = null;
    function initAudio() {
      if (!audioCtx) {
        const AC = window.AudioContext || window.webkitAudioContext;
        if (AC) audioCtx = new AC();
      }
    }
    function playTone(frequency = 440, duration = 0.12, type = "sine", volume = 0.2) {
      if (!audioCtx) return;
      const osc = audioCtx.createOscillator();
      const gain = audioCtx.createGain();
      osc.type = type;
      osc.frequency.value = frequency;
      gain.gain.value = volume;
      osc.connect(gain);
      gain.connect(audioCtx.destination);
      const now = audioCtx.currentTime;
      osc.start(now);
      gain.gain.exponentialRampToValueAtTime(0.001, now + duration);
      osc.stop(now + duration + 0.02);
    }
    function playClickSound() {
      playTone(520, 0.08, "triangle", 0.25);
    }
    function playShuffleSound() {
      if (!audioCtx) return;
      const now = audioCtx.currentTime;
      const freqs = [260, 320, 380, 440];
      freqs.forEach((f, i) => {
        const osc = audioCtx.createOscillator();
        const gain = audioCtx.createGain();
        osc.type = "square";
        osc.frequency.value = f;
        gain.gain.value = 0.12;
        osc.connect(gain);
        gain.connect(audioCtx.destination);
        const t = now + i * 0.05;
        osc.start(t);
        gain.gain.exponentialRampToValueAtTime(0.001, t + 0.08);
        osc.stop(t + 0.1);
      });
    }

    // ---- storage helpers ----
    function loadFromStorage() {
      try {
        const raw = localStorage.getItem(STORAGE_KEY);
        if (!raw) return null;
        const parsed = JSON.parse(raw);
        if (!Array.isArray(parsed) || parsed.length !== TOTAL_CARDS) return null;
        return parsed;
      } catch {
        return null;
      }
    }
    function saveToStorage() {
      try {
        localStorage.setItem(STORAGE_KEY, JSON.stringify(cards));
      } catch {}
    }
    function resetStorage() {
      try {
        localStorage.removeItem(STORAGE_KEY);
      } catch {}
    }

    // ---- deck management ----
    function buildCards() {
      const stored = loadFromStorage();
      cards = stored || defaultCards.map(c => ({ ...c }));
    }

    function shuffleDeck() {
      deck = cards.map((c, idx) => ({ ...c, id: idx + 1, idx }));
      for (let i = deck.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [deck[i], deck[j]] = [deck[j], deck[i]];
      }
      currentIndex = -1;
    }

    function vibeToGlow(vibe) {
      switch (vibe) {
        case "fun": return "glow-gold";
        case "dark": return "glow-red";
        case "flirty": return "glow-pink";
        case "chaos": return "glow-violet";
        case "chill": return "glow-violet";
        default: return "glow-gold";
      }
    }

    function vibeLabel(vibe) {
      switch (vibe) {
        case "fun": return "Fun card";
        case "dark": return "Dark card";
        case "flirty": return "Flirty card";
        case "chaos": return "Chaos card";
        case "chill": return "Chill card";
        default: return "Custom card";
      }
    }

    // ---- UI refs ----
    const cardEl = document.getElementById("card");
    const cardTitleEl = document.getElementById("cardTitle");
    const cardThemeEl = document.getElementById("cardTheme");
    const cardPunishEl = document.getElementById("cardPunishment");
    const cardNumberEl = document.getElementById("cardNumber");
    const cardVibeEl = document.getElementById("cardVibe");

    const startBtn = document.getElementById("startBtn");
    const drawBtn = document.getElementById("drawBtn");
    const statusTextEl = document.getElementById("statusText");
    const remainingTextEl = document.getElementById("remainingText");

    const configToggle = document.getElementById("configToggle");
    const configPanel = document.getElementById("configPanel");
    const cfgTitle = document.getElementById("cfgTitle");
    const cfgTheme = document.getElementById("cfgTheme");
    const cfgPunish = document.getElementById("cfgPunish");
    const cfgVibe = document.getElementById("cfgVibe");
    const configMessage = document.getElementById("configMessage");
    const configCardLabel = document.getElementById("configCardLabel");
    const saveBtn = document.getElementById("saveBtn");
    const resetBtn = document.getElementById("resetBtn");

    function updateRemaining() {
      const remaining = gameStarted ? TOTAL_CARDS - (currentIndex + 1) : 0;
      remainingTextEl.textContent = `Remaining: ${remaining}`;
    }

    function applyCard(card) {
      cardTitleEl.textContent = card.title;
      cardThemeEl.textContent = card.theme;
      cardPunishEl.textContent = card.punishment;
      cardNumberEl.textContent = card.id;
      cardVibeEl.textContent = vibeLabel(card.vibe);

      cardEl.classList.remove("glow-pink", "glow-violet", "glow-gold", "glow-red");
      cardEl.classList.add(vibeToGlow(card.vibe));
    }

    function drawAnimation(card) {
      cardEl.classList.remove("card-draw");
      void cardEl.offsetWidth; // reflow
      cardEl.classList.add("card-draw");
      setTimeout(() => {
        applyCard(card);
      }, 90);
    }

    function startGame() {
      initAudio();
      playShuffleSound();
      shuffleDeck();
      gameStarted = true;
      drawBtn.disabled = false;
      statusTextEl.innerHTML = "Deck shuffled. Draw a card and both of you match the theme with a 15-second song.";
      cardEl.classList.add("card-shuffle");
      setTimeout(() => cardEl.classList.remove("card-shuffle"), 520);
      updateRemaining();
    }

    function endDeck() {
      statusTextEl.innerHTML = "Deck is empty. Hit <strong>Start Game</strong> to reshuffle all 100 cards.";
      drawBtn.disabled = true;
    }

    function drawCard() {
      if (!gameStarted) return;
      initAudio();
      playClickSound();
      currentIndex++;
      if (currentIndex >= deck.length) {
        endDeck();
        updateRemaining();
        return;
      }
      const card = deck[currentIndex];
      drawAnimation(card);
      updateRemaining();
      if (currentIndex === deck.length - 1) {
        statusTextEl.innerHTML = "Last card. Finish your songs, then decide if you obey one more round.";
      } else {
        statusTextEl.innerHTML = "Play 15 seconds each. If they guess your song during those 15 seconds, you lose and obey.";
      }
      loadCurrentCardIntoConfig();
    }

    // ---- config ----
    function toggleConfig() {
      const active = configPanel.classList.toggle("active");
      configToggle.classList.toggle("active", active);
      if (active) loadCurrentCardIntoConfig();
    }

    function loadCurrentCardIntoConfig() {
      configMessage.textContent = "";
      if (currentIndex < 0 || currentIndex >= deck.length) {
        configCardLabel.textContent = "Config: roll a card first";
        cfgTitle.value = "";
        cfgTheme.value = "";
        cfgPunish.value = "";
        cfgVibe.value = "fun";
        return;
      }
      const cardMeta = deck[currentIndex];
      const idx = cardMeta.idx;
      const card = cards[idx];

      configCardLabel.textContent = `Config: Card ${cardMeta.id}`;
      cfgTitle.value = card.title || "";
      cfgTheme.value = card.theme || "";
      cfgPunish.value = card.punishment || "";
      cfgVibe.value = card.vibe || "fun";
    }

    function saveCurrentCard() {
      if (currentIndex < 0 || currentIndex >= deck.length) {
        configMessage.textContent = "Draw a card before editing.";
        return;
      }
      const meta = deck[currentIndex];
      const idx = meta.idx;
      const card = cards[idx];

      card.title = (cfgTitle.value || card.title).trim();
      card.theme = (cfgTheme.value || card.theme).trim();
      card.punishment = (cfgPunish.value || card.punishment).trim();
      card.vibe = cfgVibe.value || card.vibe || "fun";

      cards[idx] = card;
      deck[currentIndex] = { ...meta, ...card };
      saveToStorage();
      applyCard({ ...meta, ...card });
      configMessage.textContent = "Saved. This card is now updated on this device.";
    }

    function handleResetDeck() {
      resetStorage();
      buildCards();
      shuffleDeck();
      gameStarted = true;
      drawBtn.disabled = false;
      statusTextEl.innerHTML = "Deck reset to default and reshuffled. Draw a card.";
      updateRemaining();
      configMessage.textContent = "Deck reset to original 100 cards.";
    }

    // ---- event listeners ----
    startBtn.addEventListener("click", () => {
      startGame();
    });

    drawBtn.addEventListener("click", () => {
      drawCard();
    });

    configToggle.addEventListener("click", toggleConfig);
    saveBtn.addEventListener("click", saveCurrentCard);
    resetBtn.addEventListener("click", handleResetDeck);

    // ---- init ----
    buildCards();
    updateRemaining();
  </script>
</body>
</html>
